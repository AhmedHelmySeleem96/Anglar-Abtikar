<div class="createDiv">

  <div class="tab-pane fade show active" id="rounded-corner-pills-icon-home" role="tabpanel" aria-labelledby="rounded-corner-pills-icon-home-tab" style="min-height:300px">

    <div class="card bg-light mb-3">
        <div class="card-body">
  <h3>{{ "Hr.NewEmpContract" | translate }}</h3>
  <form #formElement [formGroup]="formContract" (ngSubmit)="onSubmit(formContract)" class="form">
  <div class="row">
    <div class="form-group col-md-2 mt-5">
      <label for="branchId">{{ 'Hr.BranchId' | translate }}</label>
      <input id="branchId"  formControlName="branchId"  class="form-control">
  </div>
  <div class="form-group col-md-2 mt-5">
    <label for="employeeId">{{ 'Hr.EmployeeId' | translate }}</label>
    <input id="employeeId"  formControlName="employeeId"  class="form-control">
  </div>
  <div class="form-group col-md-2 mt-5">
    <label for="employeeName">{{ 'Hr.EmployeeName' | translate }}</label>
    <input id="employeeName"    class="form-control">
  </div>
  <div class="form-group col-md-2 mt-5">
    <label for="jobId">{{ 'Hr.JobId' | translate }}</label>
    <input id="jobId"  formControlName="jobId"  class="form-control">
  </div>
  <div class="form-group col-md-2 mt-5">
    <label for="divisionId">{{ 'Hr.DivisionId' | translate }}</label>
    <input id="divisionId"  formControlName="divisionId"  class="form-control">
  </div>
  <p-tabView>
    <ng-template pTemplate="header">
        <ul class="nav nav-tabs">
            <li class="nav-item">
                <a class="nav-link" pTabTitle="بيانات العقد"></a>
            </li>
            <li class="nav-item">
              <a class="nav-link" pTabTitle="البدلات للعقد الجديد"></a>
            </li>
        </ul>
    </ng-template>
    <p-tabPanel header="{{ 'Hr.ContractInfo' | translate }}">
      <div class="row">
        <div class="form-group col-md-3 mt-5">
          <label for="contractNo">{{ 'Hr.ContractNo' | translate }}</label>
          <input id="contractNo" formControlName="contractNo"  class="form-control">
        </div>
        <div class="form-group col-md-3 mt-5">
          <label for="contractStartDate">{{ 'Hr.ContractStartDate' | translate }}</label>
          <input type="date" (change)="onchangeStatDate()" id="contractStartDate" formControlName="contractStartDate"   class="form-control">
        </div>
        <div class="form-group col-md-3 mt-5">
          <label for="contractPeriod">{{ 'Hr.ContractPeriod' | translate }}</label>
          <input id="contractPeriod" [readOnly]="!periodReadOnly" (change)="contractStartDateChange($event)" formControlName="contractPeriod"  class="form-control">
        </div>
        <div class="form-group col-md-3 mt-5">
          <label for="contractEndDate">{{ 'Hr.ContractEndDate' | translate }}</label>
          <input type="date" readonly id="contractEndDate" formControlName="contractEndDate"   class="form-control">
        </div>
      </div>
      <div class="row">
          <div class="form-group col-md-6 mt-5">
            <label for="basicSalary">{{ 'Hr.BasicSalary' | translate }}</label>
            <input  id="basicSalary" formControlName="basicSalary"  class="form-control">
          </div>
          <div class="form-group col-md-6 mt-5" >
            <label for="workCardId">{{ 'Hr.WorkCardId' | translate }}</label>
            <select  id="workCardId" formControlName="workCardId" class="form-control">
              <option  value="" disabled selected>{{ 'Hr.WorkCardId' | translate }}</option>
              <option *ngFor="let item of workCardData " [value]="item.Id">{{ item.NameAr }}</option>
            </select>
        </div>
      </div>
      <div class="row">
        <div class="form-group ">
          <label for="fileUpload">{{ 'Hr.CopyOfContract' | translate }}</label>
          <p-fileUpload id="fileUpload" formControlName="file"  url="https://www.primefaces.org/cdn/api/upload.php" (onUpload)="onUpload($event)" [multiple]="true" accept=".txt" >
            <ng-template pTemplate="content" >
                <ul *ngIf="uploadedFiles.length">
                    <li *ngFor="let file of uploadedFiles">{{ file.name }} - {{ file.size }} bytes</li>
                </ul>
            </ng-template>
        </p-fileUpload>
        </div>
    </div>
    </p-tabPanel>
    <p-tabPanel header="{{ 'Hr.NewContractAllowences' | translate }}">
      <div class="row">
        <div class="form-group col-md-4 mt-5">
          <label for="allowenceName">{{ 'Hr.AllowenceName' | translate }}</label>
          <select  id="allowenceName" formControlName="allowenceName" class="form-control">
          <option  value="" disabled selected>{{ 'Hr.AllowenceName' | translate }}</option>
          <option *ngFor="let item of allowenceData " [value]="item.Id">{{ item.NameAr }}</option>
        </select>
        </div>
        <div class="form-group col-md-4 mt-5">
          <label for="allowenceType">{{ 'Hr.AllowenceType' | translate }}</label>
          <select  id="allowenceType" formControlName="allowenceType" class="form-control">
          <option  value="" disabled selected>{{ 'Hr.AllowenceType' | translate }}</option>
          <option *ngFor="let item of allowenceTypeData " [value]="item.id">{{ item.name }}</option>
        </select>
        </div>
        <div class="form-group col-md-4 mt-5">
          <label for="allowenceValueType">{{ 'Hr.AllowenceValueType' | translate }}</label>
              <select  id="allowenceValueType" formControlName="allowenceValueType" class="form-control">
              <option  value="" disabled selected>{{ 'Hr.AllowenceValueType' | translate }}</option>
              <option *ngFor="let item of allowenceValueTypeData " [value]="item.id">{{ item.name }}</option>
            </select>
        </div>

      </div>
      <div class="row">
        <div class="form-group col-md-6 mt-5">
          <label for="allowenceValue">{{ 'Hr.AllowenceValue' | translate }}</label>
          <input  id="allowenceValue" formControlName="allowenceValue"  class="form-control">
        </div>
        <div class="form-group col-md-6 mt-5">
          <label for="currencyId">{{ 'Hr.CurrencyId' | translate }}</label>
          <select  id="currencyId" formControlName="currencyId" class="form-control">
          <option  value="" disabled selected>{{ 'Hr.CurrencyId' | translate }}</option>
          <option *ngFor="let item of currencyData " [value]="item.Id">{{ item.NameAr }}</option>
        </select>
        </div>
      </div>
    </p-tabPanel>
  </p-tabView>
  </div>
</form>

<div class="container">

  <div class="col-md-3 mb-2 mt-2">
    <input (input)="onSearch($event)" class="form-control form-control-sm " type="search" placeholder="{{ 'navBar.Search' | translate }}">
  </div>
  <p-table
  [rowsPerPageOptions]="[5, 10, 15, 20]"
  [paginator]="true"
  [rows]="5"
  [columns]="cols"
  [value]="ContractData"
  sortMode="multiple" styleClass="p-datatable-striped" [tableStyle]="{'min-width': '50rem'}"  #dt>
    <ng-template pTemplate="header" let-columns>
      <tr>
        <th class="table-data" *ngFor="let col of columns" [pSortableColumn]="col.field" [style.text-align]="'right'" >
          {{ col.header | translate }}
          <p-sortIcon [field]="col.field"></p-sortIcon>
        </th>
        <th class="ui-sortable-column table-data" [style.text-align]="'right'">
          {{ 'Actions' | translate }}
        </th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-Contract let-columns="columns">
      <tr>
        <td *ngFor="let col of columns" [style.text-align]="'right'">
          <span class="table-data" *ngIf="col.field == 'CreatedDate'">
            {{ Contract[col.field] | date:'shortDate' }}
          </span>
          <span class="table-data" *ngIf="col.field == 'StatusId'">
            {{ getStatus(Contract[col.field])?.name }}
          </span>
          <span class="table-data" *ngIf="col.field == 'BranchId'">
            {{ getBranch(Contract[col.field])?.NameAr }}
          </span>
          <span class="table-data" *ngIf="col.field != 'CreatedDate'&&col.field != 'ContractCategoryId' &&col.field != 'BranchId' && col.field != 'StatusId'  ">
            {{ Contract[col.field] }}
          </span>
        </td>
        <td>
          <div style="text-align: center">
            <img src="assets/images/editIcon.png" class="mx-3" (click)=" setEdit(Contract)" />
            <img src="assets/images/deleteTableIcon.png" class="mx-3" (click)="showDeleteConfirm(Contract)" />
          </div>
        </td>
      </tr>
    </ng-template>
  </p-table>

</div>
</div>
</div>
</div>
</div>
<div class="mt-2 text-center">
  <button type="submit" (click)="onSubmit(formContract)" class="btn btn-success" >{{ 'Save' | translate }}</button>
  <button  (click)="printPdf()" class="btn btn-info" >{{"Hr.Print" | translate}}</button>
  <button  (click)="exportData()" class="btn btn-info" id="viewBtn">{{"Hr.Export" | translate}}</button>
  <button (click)="goHome()" class="btn btn-warning Dnone" id="editBtn">{{"Cancel" | translate}}</button>
</div>
